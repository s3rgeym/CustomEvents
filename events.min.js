function Events(){this._listeners={}}Events.prototype={on:function(e,t,n,s){return(this._hasEvent(e)?this._listeners[e]:this._listeners[e]=[]).push({fn:t,scope:null!=n?n:this,once:s}),this},once:function(e,t,n){return this.on(e,t,n,!0)},off:function(e,t,n){if(arguments.length){if(1==arguments.length)this._hasEvent(e)&&delete this._listeners[e];else if(this._hasEvent(e)){for(var s=this._listeners[e],i=0;i<s.length;){var r=s[i];t!==r.fn||null!=n&&n!==r.scope?++i:s.splice(i,1)}s.length||delete this._listeners[e]}}else this._listeners={};return this},emit:function(e,t){if(this._hasEvent(e)){t=[].slice.call(arguments,1);for(var n=this._listeners[e],s=0;s<n.length;){var i=n[s];i.fn.apply(i.scope,t),i.once?n.splice(s,1):++s}n.length||delete this._listeners[e]}},_hasEvent:function(e){return this._listeners.hasOwnProperty(e)}},Events.mixin=function(e){"function"==typeof e&&(e=e.prototype);var t=new Events;for(var n in t)e[n]=t[n];return e};